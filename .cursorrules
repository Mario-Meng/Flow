# Cursor Rules - Flutter 项目代码提交规范

## 代码提交规范



### 提交信息格式规范

使用约定式提交（Conventional Commits）格式：

```
<type>(<scope>): <subject>

<body>

<footer>
```

#### Type 类型（必填）
- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更新
- `style`: 代码格式调整（不影响代码运行）
- `refactor`: 代码重构
- `perf`: 性能优化
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动
- `ci`: CI 配置文件和脚本的变更

#### Scope 范围（可选）
- `ui`: 用户界面相关
- `api`: API 相关
- `auth`: 认证相关
- `db`: 数据库相关
- `config`: 配置相关
- `deps`: 依赖更新

#### Subject 主题（必填）
- 使用中文或英文描述
- 首字母小写
- 结尾不加句号
- 简洁明了，不超过 50 个字符

#### Body 正文（可选）
- 详细描述修改内容
- 说明修改的原因和方式
- 可以多行

#### Footer 脚注（可选）
- 关闭的 issue：`Closes #123`
- 破坏性变更：`BREAKING CHANGE: 描述变更内容`

### 提交信息示例

```
feat(ui): 添加用户登录页面

实现了用户登录界面，包括用户名和密码输入框，以及登录按钮。
添加了表单验证逻辑。

Closes #45
```

```
fix(api): 修复网络请求超时问题

将默认超时时间从 5 秒增加到 10 秒，解决网络较慢时的请求失败问题。
```

```
refactor: 重构状态管理代码

将状态管理从 Provider 迁移到 Riverpod，提升代码可维护性。
```

### 自动化提交流程

在完成代码修改和测试后，按照以下步骤提交：

1. 检查代码状态：`git status`
2. 添加修改的文件：`git add .`
3. 提交代码（使用规范的提交信息格式）
4. 推送到远程仓库：`git push`

### 数据库操作文档规范

**重要：所有数据库操作修改必须同步更新数据库操作文档**

#### 数据库操作文档要求

1. **文档位置**
   - 数据库操作文档位于：`docs/DATABASE.md`
   - 每次修改数据库相关代码时，必须同步更新此文档

2. **需要记录的内容**
   - **表结构变更**：新增表、修改表结构、删除表
   - **字段变更**：新增字段、修改字段类型、删除字段、字段约束变更
   - **索引变更**：新增索引、删除索引、索引优化
   - **数据库版本升级**：版本号变更、升级脚本、迁移逻辑
   - **CRUD 操作变更**：新增、修改、删除数据库操作方法
   - **查询优化**：SQL 查询优化、性能改进
   - **数据迁移**：数据格式变更、数据清理脚本

3. **文档更新时机**
   - 在代码修改完成后立即更新文档
   - 在提交代码前必须确保文档已更新
   - 文档更新应该与代码修改在同一提交中

4. **文档格式要求**
   - 使用 Markdown 格式
   - 记录变更日期和版本号
   - 详细说明变更原因和影响范围
   - 提供变更前后的对比（如适用）
   - 记录相关的代码文件路径

5. **提交规范**
   - 数据库相关提交的 scope 应使用 `db`
   - 提交信息应包含文档更新说明
   - 示例：`feat(db): 添加用户表并更新数据库文档`

### 注意事项

- 每次提交应该是一个完整的功能或修复
- 避免提交未完成的代码
- 提交前确保代码可以正常运行
- 保持提交历史的清晰和有意义
- 不要提交敏感信息（API keys、密码等）
- 不要提交构建产物（build/、.dart_tool/ 等）
- **数据库操作修改必须同步更新数据库操作文档**


